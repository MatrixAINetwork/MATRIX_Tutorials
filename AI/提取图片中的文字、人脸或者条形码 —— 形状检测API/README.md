### 提取图片中的文字、人脸或者条形码 —— 形状检测API


#### 什么是形状检测 API？

借助 API navigator.mediaDevices.getUserMedia 和新版安卓的 chrome photo picker，从移动设备上的相机获取图像或者实时上传视频数据或本地图像变得相当容易。在此之前，这些动态的图像数据以及页面上的静态图像一直都是个我们无法操作的黑盒，即使图像实际上可能包含许多有趣的特征，如人脸、条形码和文本。

过去，如果开发人员想要在客户端提取这些特征，例如构建一个二维码识别器，他们必须借助外部的 JavaScript 库。从性能的角度来看代价是昂贵的，并且会增加整体页面的资源体积。另一方面，诸如 Android、iOS 和 macOS 这些操作系统，以及他们的相机模块中的硬件芯片，通常已经具有高性能和高度优化的特征检测器，例如 Android 的 FaceDetector 或者 iOS 自带的特征检测器 CIDetector。

而 Shape Detection API 做的便是调用这些原生实现，并将其转化为一组 JavaScript 接口。目前，这个 API 支持的功能是通过 FaceDetector 接口进行人脸检测，通过 BarcodeDetector 接口进行条形码检测以及通过 TextDetector 接口进行文本检测（光学字符识别，OCR）。

    小提示：尽管文本检测是一个有趣的领域，但在目前要标准化的计算平台或字符集中，文本检测还不够稳定，这也使文本检测已经有一套单独的信息规范的原因。


#### Shape Detection API 实践用例


如上所述，Shape Detection API 目前支持检测人脸、条形码和文本。以下列表包含了所有三个功能的用例示例：

- 人脸检测

在线社交网络或照片共享网站通常会让用户在图像中标记出人物。通过边缘检测识别人脸，能使这项工作更为便捷。

内容网站可以根据可能检测到的面部动态裁剪图像，而不是依赖于其他启发式方法，或者使用 Ken Burns 提出的通过平移或者缩放检测人脸。

多媒体消息网站可以允许其用户在检测到的面部的不同位置上添加太阳镜或胡须之类的有趣贴图。

- 条形码检测

能够读取二维码的 Web 应用程序可以实现很多有趣的用例，如在线支付或 Web 导航，或使用条形码在应用程序上分享社交连接。

购物应用可以允许其用户扫描实体店中物品的 EAN 或者 UPC 条形码，以在线比较价格。

机场可以设立网络信息亭，乘客可以在那里扫描登机牌的 Aztec codes 以显示与其航班相关的个性化信息。

